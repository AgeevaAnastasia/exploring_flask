"""–§—É–Ω–∫—Ü–∏—è abort

–§—É–Ω–∫—Ü–∏—è abort() —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ Flask. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç
–≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –µ–π –∫–æ–¥ –æ—à–∏–±–∫–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

–ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É 404 —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º "–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞",
–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é abort():"""


import logging
from flask import Flask, render_template, request, abort
from flask_lesson.db import get_blog

app = Flask(__name__)

logger = logging.getLogger(__name__)


@app.route('/')
def index():
    return '<h1>Hello world!</h1>'


@app.route('/blog/<int:id>')
def get_blog_by_id(id):
    ...
    # –¥–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å –≤ –ë–î –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å—Ç–∞—Ç—å–∏ –ø–æ id
    result = get_blog(id)
    if result is None:
        abort(404)
    ...
    # –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞–π–¥–µ–Ω–Ω—É—é –≤ –ë–î —Å—Ç–∞—Ç—å—é


@app.errorhandler(404)
def page_not_found(e):
    logger.warning(e)
    context = {
        'title': '–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞',
        'url': request.base_url,
    }
    return render_template('404.html', **context), 404


def get_blog(id):
    return None


"""–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é abort() –≤–Ω—É—Ç—Ä–∏ get_blog_by_id –¥–ª—è –≤—ã–∑–æ–≤–∞
–æ—à–∏–±–∫–∏ 404 –≤ —Å–ª—É—á–∞–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Å—Ç–∞—Ç—å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

üí° –í–Ω–∏–º–∞–Ω–∏–µ! –ß—Ç–æ–±—ã –∫–æ–¥ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ—Ç—Ä–∞–±–æ—Ç–∞–ª –±–µ–∑ –æ—à–∏–±–æ–∫,
–Ω–∞–ø–∏—Å–∞–Ω–∞ —Å–ª–µ–¥—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≥–ª—É—à–∫–∞:

def get_blog(id):
return None

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫
‚óè 400: –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
‚óè 401: –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
‚óè 403: –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
‚óè 404: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
‚óè 500: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
–ò–Ω–æ–≥–¥–∞ –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ –≤ –∫–æ–¥–µ —Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—à–∏–±–∫—É 500. –í –∏–¥–µ–∞–ª—å–Ω–æ–º
–º–∏—Ä–µ –∫–æ–¥ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏ –∏ –Ω–µ –æ—Ç–¥–∞—ë—Ç –æ—à–∏–±–∫—É 500. –ù–æ
–ø–æ—á–µ–º—É –±—ã –Ω–µ –ø–æ–¥—Å—Ç–µ–ª–∏—Ç—å —Å–æ–ª–æ–º–∫–∏.
–£–¥–∞–ª–∏–º —Ñ—É–Ω–∫—Ü–∏–∏ get_blog –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ. –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –Ω–∞–π—Ç–∏ —Å—Ç–∞—Ç—å—é –ø–æ id
–ø–æ–ª—É—á–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:

Internal Server Error
The server encountered an internal error and was unable to complete your request.
Either the server is overloaded or there is an error in the application.


üî• –í–∞–∂–Ω–æ! –ï—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ —Å–µ—Ä–≤–µ—Ä –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏, –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–∞
—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –æ—à–∏–±–∫–∏, –∞ –Ω–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º

debug=False

–í –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –Ω–∞–ø–∏—à–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Å—Ç–∏–ª–µ –ø—Ä–æ–µ–∫—Ç–∞.
..."""


@app.errorhandler(500)
def page_not_found(e):
    logger.error(e)
    context = {
        'title': '–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞',
        'url': request.base_url,
    }
    return render_template('500.html', **context), 500

"""
...
–ü–æ —Å—É—Ç–∏ –≤–∑—è–ª–∏ –∑–∞ –æ—Å–Ω–æ–≤—É –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–∫–∏ 404, –Ω–æ –ª–æ–≥ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –Ω–µ
–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –∞ –æ—à–∏–±–∫—É. –ü–ª—é—Å –Ω–æ–≤—ã–π —à–∞–±–ª–æ–Ω, –∏ –≤–æ–∑–≤—Ä–∞—Ç –∫–æ–¥–∞ 500 –∫–ª–∏–µ–Ω—Ç—É.
–®–∞–±–ª–æ–Ω 500 –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:
{% extends 'base.html' %}
{% block title %}
{{ title }}
{% endblock %}
{% block content %}
<div class="row alert alert-danger">
<p class="col-12">–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ú—ã —É–∂–µ –∑–Ω–∞–µ–º –∏
–∑–∞–Ω–∏–º–∞–µ–º—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏.<br>
<a href="{{ url }}">–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ
–º–∏–Ω—É—Ç</a>
</p>
</div>
{% endblock %}"""


if __name__ == '__main__':
    app.run()
