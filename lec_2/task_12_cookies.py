"""–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

–í —Ñ–∏–Ω–∞–ª–µ –ª–µ–∫—Ü–∏–∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏.
–†–∞–±–æ—Ç–∞ —Å cookie —Ñ–∞–π–ª–∞–º–∏ –≤ Flask


Cookie —Ñ–∞–π–ª—ã ‚Äî —ç—Ç–æ –Ω–µ–±–æ–ª—å—à–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏ –µ–≥–æ
–ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è—Ö –Ω–∞ —Å–∞–π—Ç–µ. –í Flask, —Ä–∞–±–æ—Ç–∞ —Å cookie —Ñ–∞–π–ª–∞–º–∏ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–∞ –∏ –º–æ–∂–µ—Ç
–±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —Å –ø–æ–º–æ—â—å—é —Å–∞–º–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞, –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö
–º–æ–¥—É–ª–µ–π.

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å cookie —Ñ–∞–π–ª–∞–º–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å Flask –∏ –æ–±—ä–µ–∫—Ç
request, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ cookie —Ñ–∞–π–ª–∞–º. –ü–æ–¥–æ–±–Ω–æ–µ –º—ã
–ø—Ä–æ–¥–µ–ª—ã–≤–∞–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∑–∞ –ª–µ–∫—Ü–∏—é. –†–∞–∑–±–µ—Ä–µ–º –∫—É–∫–∏ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ"""

from flask import Flask, request, make_response

app = Flask(__name__)


@app.route('/')
def index():
    # —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º cookie
    response = make_response("Cookie —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
    response.set_cookie('username', 'admin')
    return response


@app.route('/getcookie/')
def get_cookies():
    # –ø–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ cookie
    name = request.cookies.get('username')
    return f"–ó–Ω–∞—á–µ–Ω–∏–µ cookie: {name}"


"""–ú—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ cookie —Ñ–∞–π–ª–∞ —Å –∫–ª—é—á–æ–º "username" –∏ –∑–Ω–∞—á–µ–Ω–∏–µ–º
"admin" –≤ —Ñ—É–Ω–∫—Ü–∏–∏ index(). –ó–∞—Ç–µ–º –º—ã –ø–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ cookie —Ñ–∞–π–ª–∞ —Å –∫–ª—é—á–æ–º
"username" –≤ —Ñ—É–Ω–∫—Ü–∏–∏ get_cookies() –∏ –≤—ã–≤–æ–¥–∏–º –µ–≥–æ –Ω–∞ —ç–∫—Ä–∞–Ω.


–°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞

–ù–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–≤ –æ —Ñ—É–Ω–∫—Ü–∏–∏ make_response(). –í–æ –≤—Å–µ—Ö –ø—Ä–æ—à–ª—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –º—ã
–≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ –∏–∑ view —Ñ—É–Ω–∫—Ü–∏–π –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç, —Ç–µ–∫—Å—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–∫ HTML,
–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —á–µ—Ä–µ–∑ render_template –∏ –¥–∞–∂–µ –∑–∞–ø—Ä–æ—Å—ã
–ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è —Ñ—É–Ω–∫—Ü–∏—è–º redirect –∏ url_for. –ö–∞–∂–¥—ã–π —Ä–∞–∑ Flask –Ω–µ—è–≤–Ω–æ
—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª –æ–±—ä–µ–∫—Ç –æ—Ç–≤–µ—Ç–∞ - response. –ï—Å–ª–∏ –∂–µ –º—ã —Ö–æ—Ç–∏–º –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Ç–≤–µ—Ç,
–º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π make_response.
–ò–∑–º–µ–Ω–∏–º –ø—Ä–æ—à–ª—ã–π –ø—Ä–∏–º–µ—Ä. –î–ª—è –Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–¥–∏–º —à–∞–±–ª–æ–Ω main.html

{% extends 'base.html' %}
{% block title %}
{{ super() }} - {{ title }}
{% endblock %}
{% block content %}
<div class="row">
<h1 class="col-12 col-md-6 display-2">–ü—Ä–∏–≤–µ—Ç, –º–µ–Ω—è –∑–æ–≤—É—Ç
{{ name }}</h1>
<img src="/static/image/foto.jpg" class="col-12 col-md-6
img-fluid rounded-circle" alt="–ú–æ—ë —Ñ–æ—Ç–æ">
</div>
{% endblock %}

–®–∞–±–ª–æ–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –î–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –æ–Ω —Ä–∞—Å—à–∏—Ä—è–µ—Ç
–±–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω. –ù–∏—á–µ–≥–æ –Ω–æ–≤–æ–≥–æ –∏ –Ω–∏–∫–∞–∫–∏—Ö —É–ø–æ–º–∏–Ω–∞–Ω–∏–π ‚Äú–ø–µ—á–µ–Ω–µ–∫‚Äù.
–ê —Ç–µ–ø–µ—Ä—å –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ"""

@app.route('/')
def index():
    context = {
        'title': '–ì–ª–∞–≤–Ω–∞—è',
        'name': '–•–∞—Ä–∏—Ç–æ–Ω'
    }
    response = make_response(render_template('main.html', **context))
    response.headers['new_head'] = 'New value'
    response.set_cookie('username', context['name'])
    return response


"""–ò—Å–ø–æ–ª—å–∑—É—è render_template –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ —à–∞–±–ª–æ–Ω, –Ω–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ,
–∞ –ø–µ—Ä–µ–¥–∞—ë–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ—É–Ω–∫—Ü–∏—é make_response. –û—Ç–≤–µ—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω, –Ω–æ –º—ã –º–æ–∂–µ–º
–≤–Ω–µ—Å—Ç–∏ –≤ –Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º. –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ –¥–æ–±–∞–≤–∏–ª–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏
–ø–∞—Ä—É –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –∫—É–∫–∏ –¥–ª—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.


üî• –í–∞–∂–Ω–æ! –ù–µ –ø—É—Ç–∞–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±–ª–æ–∫ head –≤ —Ç–µ–ª–µ –æ—Ç–≤–µ—Ç–∞.

"""


if __name__ == '__main__':
    app.run()
