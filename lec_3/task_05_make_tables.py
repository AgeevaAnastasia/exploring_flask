"""‚û¢–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–û—Å—Ç–∞–ª—Å—è —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø. –ù–∞–ø–∏—à–∏–º —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—ã —á–µ—Ä–µ–∑
–∫–æ–Ω—Å–æ–ª—å–Ω—É—é –∫–æ–º–∞–Ω–¥—É. –ó–∞–ø–æ–ª–Ω—è–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø—Ä–æ–µ–∫—Ç–∞"""

...
from flask_lesson_3.models import db, User, Post, Comment

from flask_sqlalchemy import SQLAlchemy
from datetime import datetime

db = SQLAlchemy()


@app.cli.command("init-db")
def init_db():
db.create_all()
print('OK')
...


"""–ò–∑ models –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏ –≤—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã —Ç–∞–±–ª–∏—Ü. –ë–µ–∑ —ç—Ç–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞
—Ñ—É–Ω–∫—Ü–∏—è create_all –º–æ–∂–µ—Ç –Ω–µ —É–≤–∏–¥–µ—Ç—å –∫–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å.
–î–∞–ª–µ–µ —Å–æ–∑–¥–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–æ–π –≤ –∫–æ–Ω—Å–æ–ª–∏:
flask init-db

üî• –í–Ω–∏–º–∞–Ω–∏–µ! –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–∫—É, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —É –≤–∞—Å
–µ—Å—Ç—å wsgi.py —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –æ–Ω –≤–µ—Ä–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.
–ù–∞–ø—Ä–∏–º–µ—Ä –µ–≥–æ –∫–æ–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–∞–∫–∏–º:

from flask_lesson_3.app_01 import app

if __name__ == '__main__':
    app.run(debug=True)
    
    
–ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π –≤ Flask-SQLAlchemy. –ë—ã–ª–∏
–æ–ø–∏—Å–∞–Ω—ã –∫–ª–∞—Å—Å—ã –º–æ–¥–µ–ª–µ–π, –ø–æ–ª—è –º–æ–¥–µ–ª–µ–π –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏.



–†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏

–ü–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π –≤ Flask-SQLAlchemy –º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏ –≤
–±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏
—É–¥–∞–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π, –∞ —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∏—Ö —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é.


‚û¢–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç –º–æ–¥–µ–ª–∏ –∏
–¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ —Å–µ—Å—Å–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ commit() –¥–ª—è
—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π.
..."""


@app.cli.command("add-john")
def add_user():
    user = User(username='john', email='john@example.com')
    db.session.add(user)
    db.session.commit()
    print('John add in DB!')


"""...

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –º–æ–¥–µ–ª–∏ User —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è "john"
–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç–æ–π "john@example.com". –ó–∞—Ç–µ–º –æ–±—ä–µ–∫—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å–µ—Å—Å–∏—é
–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ commit().

–ö–∞–∫ –≤—ã —É–∂–µ –¥–æ–≥–∞–¥–∞–ª–∏—Å—å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏
–∫–æ–º–∞–Ω–¥—É flask add-john


‚û¢–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –µ–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∏–∑–º–µ–Ω–∏—Ç—å
–Ω—É–∂–Ω—ã–µ –ø–æ–ª—è –∏ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ commit().

..."""


@app.cli.command("edit-john")
def edit_user():
    user = User.query.filter_by(username='john').first()
    user.email = 'new_email@example.com'
    db.session.commit()
    print('Edit John mail in DB!')

"""
...
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –ø–æ–ª—É—á–∞–µ–º –æ–±—ä–µ–∫—Ç –º–æ–¥–µ–ª–∏ User –ø–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è "john",
–∏–∑–º–µ–Ω—è–µ–º –µ–≥–æ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É—é –ø–æ—á—Ç—É –Ω–∞ "new_email@example.com" –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º
–∏–∑–º–µ–Ω–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ commit().

üî• –í–Ω–∏–º–∞–Ω–∏–µ! –ï—Å–ª–∏ –±—ã –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∑–≤–æ–ª—è–ª–∞ —Ö—Ä–∞–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ username, –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é user –ø–æ–ø–∞–ª –±—ã –æ–¥–∏–Ω
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–ª–∞–≥–æ–¥–∞—Ä—è –º–µ—Ç–æ–¥—É first().


‚û¢–£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π

–î–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –µ–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ delete() –∏
–∑–∞—Ç–µ–º –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ commit().
..."""


@app.cli.command("del-john")
def del_user():
    user = User.query.filter_by(username='john').first()
    db.session.delete(user)
    db.session.commit()
    print('Delete John from DB!')


"""...

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –ø–æ–ª—É—á–∞–µ–º –æ–±—ä–µ–∫—Ç –º–æ–¥–µ–ª–∏ User –ø–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è "john",
—É–¥–∞–ª—è–µ–º –µ–≥–æ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ delete() –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å
–ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ commit().
"""